# 迷宮探索ゲーム ラビリンス



## 1.ゲームの起動方法
### 1.1 環境構築
**Node.jsのダウンロード**  

パソコンに，Node.jsをインストールする.  
インストール出来たら，コマンドプロンプトで「node -v」を実行し，バージョンを確認．  
バージョンが確認出来たらインストール完了！  

**npmのインストール** 

my-labyrinth-gameフォルダ内で，コマンドプロンプトまたはターミナルを起動.  
「npm install」を実行  

### 1.2 アプリ起動
1. my-labyrinth-gammeフォルダを開く
2. ターミナルを開き，「npm start」を押してアプリ起動


# 2.本ゲームの流れ

　このゲームには2人対戦モードと4人対戦モードが存在し,それぞれルールが異なる。大まかな流れとしては,  
 1. 迷路の作成  
 2. 迷路の交換  
 3. 実際に迷路を攻略する  
である。  
　迷路の作成では,6×6のマス目に壁を20個,スタート地点とゴール地点を配置する。このとき,スタート地点からゴール地点まで到達することができない場合には迷路の作成完了をすることができないので,ゴールができるような迷路を作成する。  
　また,ラビリンスでは相手と迷路の交換を行う。これによって,お互いが相手の壁の情報,スタート地点,ゴール地点を把握している状態が発生する。
　実際に迷路を攻略するとき,上下左右の4方向のどこに行くかを決める。その選んだ方向に壁がなかった場合は移動成功となり,移動失敗するまで連続して迷路の探索が可能になる。

### 2.1 2人対戦

　2人対戦の勝利条件は 相手より先にゴールすることである。そのため,壁に当たらず連続移動できるかどうかが鍵となる。

### 2.2 4人対戦

  4人対戦には,2人対戦のルールに加えて"ポイント","バトル"の2つの概念が追加される。そして,4人対戦の勝利条件はこのポイントの多さで決まる。ポイントの稼ぎ方は3つ存在し,  
  1. まだ到達したことのないエリアを探索する(1ポイント)  
  2. バトルで勝利する(勝利したとき,5ポイント)  
  3. ゴールに到達した順番(先着順で,それぞれ20,15,10,0ポイント)  
である。  
　基本的には1番のエリア探索でポイントを稼ぐことになるが,エリア移動をしている際に他のプレイヤーと座標が重なる時がある。このとき,バトルが発生する。  
　バトルは,2人の所持ポイントから賭けるポイントを決定し,どちらの数字が大きいかを決めるギミックである。バトルに勝利したプレイヤーは5ポイント獲得し,敗北したプレイヤーは1ターン行動不能になる。1ターン行動不能はかなり重い制約であるため,なるべく多くのポイントを賭けたい。しかし,このゲームの最終順位はポイントによって決まるためできるだけポイントの消費は抑えたい。

## 3.ファイル構成
このプロジェクトは、ReactとFirebaseを使用して構築されている。以下に主要なファイルと、それぞれがゲーム内で担う役割を説明する。

### 主要ディレクトリ

-   **`/public`**
    -   **役割:** アプリケーションの土台となる静的ファイルを配置する。
    -   `index.html`: 全てのReactコンポーネントが描画される、Webページの本体
    -   `favicon.ico`: ブラウザのタブに表示されるアイコン

-   **`/src`**
    -   **役割:** ゲームのロジックや画面表示など、アプリケーションの心臓部となるソースコードを格納する。

### `/src` ディレクトリの詳細

-   **`/components`**: ゲームの各画面やUI部品（コンポーネント）を管理する。
    -   `StartScreen.jsx`: **【スタート画面】**
        -   プレイヤーが最初に訪れる画面
        -   ユーザー名の入力と、利用規約への同意を担当する
    -   `LobbyScreen.jsx`: **【ロビー画面】**
        -   ゲームのマッチングを行う待合室
        -   「2人対戦」または「4人対戦」の部屋を作成・参加する機能を提供する
    -   `MazeCreateScreen.jsx`: **【迷路作成画面】**
        -   対戦相手を妨害するための迷路を設計する画面
        -   壁の配置や、スタート・ゴール地点の設定を行う
    -   `PlayScreen.jsx`: **【ゲームプレイ画面】**
        -   ゲームのメインとなる対戦画面
        -   相手の迷路を攻略する機能、リアルタイムチャットでの心理戦、4人対戦時のバトル機能など、最も多くのロジックが集中している
    -   `ResultScreen.jsx`: **【リザルト画面】**
        -   ゲーム終了後に表示される結果画面
        -   最終的な順位、獲得ポイント、スコアなどを表示する

-   **`/firebase`**: データベースや認証など、バックエンド機能を提供するFirebaseとの連携を担当する
    -   `firebase-config.js`: Firebaseプロジェクトへの接続情報を定義し、各種サービス（Firestore Databaseなど）を初期化する

### ルート階層の主要ファイル

-   **`App.js`**: **【総合司令塔】**
    -   アプリケーション全体の親コンポーネントとして、全ての画面コンポーネントを統括する
    -   プレイヤーの現在の状態（ロビーにいるか、対戦中かなど）に応じて、表示する画面を切り替える役割を担う
-   **`index.js`**: **【起動スイッチ】**
    -   このアプリケーションが起動する際の最初の一歩（エントリーポイント）
    -   `App.js`を呼び出し、`public/index.html`に描画することでゲームを開始させる
-   **`package.json`**: **【プロジェクトの設計図】**
    -   このプロジェクトが依存している外部ライブラリ（React, Firebaseなど）の一覧が記載されている
    -   `npm start`（開発サーバーの起動）や`npm run build`（本番用ファイルの生成）といった、開発用コマンドを定義している
